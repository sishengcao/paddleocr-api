# 配置说明

## 环境变量配置 (.env)

### 应用配置

| 变量 | 说明 | 默认值 |
|------|------|--------|
| `APP_NAME` | 应用名称 | PaddleOCR API |
| `APP_VERSION` | 应用版本 | 2.0.0 |
| `DEBUG` | 调试模式 | false |
| `LOG_LEVEL` | 日志级别 | INFO |

### 服务器配置

| 变量 | 说明 | 默认值 |
|------|------|--------|
| `HOST` | 监听地址 | 0.0.0.0 |
| `PORT` | 服务端口 | 8000 |
| `WORKERS` | 工作进程数 | 4 |

### 数据库配置

| 变量 | 说明 | 默认值 |
|------|------|--------|
| `DB_HOST` | 数据库地址 | localhost / mysql (Docker) |
| `DB_PORT` | 数据库端口 | 3306 |
| `DB_USER` | 数据库用户 | root |
| `DB_PASSWORD` | 数据库密码 | - |
| `DB_NAME` | 数据库名称 | paddleocr_api |
| `DB_POOL_SIZE` | 连接池大小 | 20 |
| `DB_MAX_OVERFLOW` | 连接池最大溢出 | 40 |
| `DB_POOL_TIMEOUT` | 连接池超时(秒) | 30 |
| `DB_POOL_RECYCLE` | 连接回收时间(秒) | 3600 |

### Redis 配置

| 变量 | 说明 | 默认值 |
|------|------|--------|
| `REDIS_HOST` | Redis 地址 | localhost / redis (Docker) |
| `REDIS_PORT` | Redis 端口 | 6379 |
| `REDIS_DB` | Redis 数据库 | 0 |
| `REDIS_PASSWORD` | Redis 密码 | - |

### Celery 配置

| 变量 | 说明 | 默认值 |
|------|------|--------|
| `CELERY_WORKER_CONCURRENCY` | Worker 并发数 | 4 |
| `CELERY_WORKER_MAX_TASKS_PER_CHILD` | 每个子进程最大任务数 | 1000 |

### OCR 配置

| 变量 | 说明 | 默认值 | 可选值 |
|------|------|--------|--------|
| `OCR_LANG` | OCR 语言 | ch | ch / en |
| `OCR_USE_GPU` | 使用 GPU | false | true / false |
| `OCR_USE_ANGLE_CLS` | 使用角度分类 | true | true / false |

### 任务配置

| 变量 | 说明 | 默认值 |
|------|------|--------|
| `TASK_DEFAULT_PRIORITY` | 默认优先级 | 5 |
| `TASK_MAX_RETRIES` | 最大重试次数 | 3 |
| `TASK_RETRY_DELAY` | 重试延迟(秒) | 60 |
| `TASK_LOCK_TTL` | 任务锁TTL(秒) | 3600 |
| `TASK_DUPLICATE_DETECTION` | 重复检测 | true |

### 导出配置

| 变量 | 说明 | 默认值 |
|------|------|--------|
| `EXPORT_TTL_HOURS` | 导出文件保留时间(小时) | 24 |

### API 配置

| 变量 | 说明 | 默认值 |
|------|------|--------|
| `API_PREFIX` | API 前缀 | /api/ocr |
| `MAX_UPLOAD_SIZE` | 最大上传大小(字节) | 104857600 (100MB) |
| `MAX_BATCH_FILES` | 批量上传最大文件数 | 10 |
